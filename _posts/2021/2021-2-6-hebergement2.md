---
layout: post
title: Blog - Opération hébergement ! la suite de la gamberge
category: geek
tags: geek, blog, hébergement, web, internet,
---

**J'en étais [resté à dire](https://www.cheziceman.fr/2021/hebergement/) que j'avais repris un nom de domaine mais vous n'en avez pas forcément vu la couleur si vous suivez ce blog sur .wordpress.com. Je retombe dans mes vieux travers ? Non, juste que je me mets en cohérence avec ce que j'espère aujourd'hui du web, à savoir simplicité, facilité d'accès, rapidité et frugalité. Je vais essayer de ne pas être trop technique mais quand même, je précise...**

Mon choix a été de prendre le moins cher pour **le nom de domaine** tout en restant dans quelque chose de sérieux. Bon, j'ai été un peu surpris par les procédures de validation pour l'ouvrir avec le recours au téléphone, au QRCode etc mais ça fonctionne...J'ai dissocié une fois de plus le nom de domaine de l'hébergement car il vaut parfois mieux mettre les oeufs dans deux paniers. Pour mémoire, il suffit ensuite de donner au "registrar" les serveurs DNS de son hébergement pour que ça fonctionne. Il faut entre quelques heures et un ou deux jours pour que tous les serveurs du monde se mettent à jour pour reconnaître cet appairage. Comme d'habitude, Google et Cloudflare sont rapides, d'autres un peu moins, hum.

Vous remarquerez que je n'avais pas encore cité ce nouveau nom de manière officielle mais discrètement. Bon, finalement, je peux, c'est [https://www.cheziceman.fr](https://www.cheziceman.fr) . Comme toujours ma logique est d'avoir deux sites, un pour la production, un pour **les tests en "live"**, cela s'ajoutant maintenant à la version "locale" (sur mon pc) que je teste toujours avant l'envoi du fichier. J'ajoute à cela une sauvegarde des fichiers sources pour être sûr de ne rien perdre et de pouvoir re-générer le site en quelques secondes au cas où. C'est une des raisons du choix du site statique, d'ailleurs. Je ne peux pas être pris au dépourvu par un problème de base SQL, de PHP, de mise à jour foireuse, etc, je mise sur la simplicité pour la sécurité. Mais j'avoue que pour ce résultat là, il n'a pas suffi de faire du statique. La configuration d'un site est devenue plus pointue qu'il y a 20 ans...

Il a en effet fallu que j'indique quelques éléments à **notre ami le serveur [Apache](https://fr.wikipedia.org/wiki/Apache_HTTP_Server)** pour que ça se passe bien. J'ai donc édité le fichier . [htaccess](https://fr.wikipedia.org/wiki/.htaccess), un simple fichier texte à la racine du serveur. En fait j'ai fait passer différents tests de sécurité dispo sur le net au site en version beta pour en connaître les principales failles. Mon hébergeur a la bonne idée de mettre à disposition un bon outil pour ça, qui est un site d'ordinaire payant. J'ai panaché cela avec d'autres tests pour arriver au meilleur compromis. Je ne vais pas faire un tutoriel là dessus, je n'ai pas assez de compétences pour tout expliquer correctement, même si je comprends ce que je fais et que j'ai retouché ce que j'ai trouvé à droiteà gauche. Mais dites vous quand même qu'il faut maintenant bien travailler ce sujet. Pour les petits nouveaux, je conseille d'avoir une version .txt de ce même fichier htaccess, plus facile à éditer sur son pc, surtout si on travaille en environnement windows. J'ai tâtonné un peu pour la gestion du cache. Tout ça est lisible dans les sources tout en bas dans le pied de page.

**L'hébergeur**, justement ? Je vous ai dit que je trouvais les formules trop souvent opaques ou surdimensionnées. Je n'ai donc pas choisi d'utiliser ce qui était permis chez mon registrar qui m'offrait pourtant assez d'espace pour mon petit site de 1400 pages. Je n'ai besoin d'aucune base SQL ou autre, juste des Megaoctets, même pas 1Go. Car je ne mets pas la vidéo ici, pas les images non plus que j'ai centralisé ailleurs après un travail d'optimisation (en moyenne, j'ai divisé par 8 ). Pas besoin non plus de 25 adresses email, etc... Je voulais du sérieux, avec de l'historique, du SAV au cas où. Je ne vais pas faire de pub de toute façon mais j'ai commencé par une offre gratuite et sans pub qui peut me permettre d'aller vers un peu plus gros si le succès (lol) est au rendez-vous sans bourse délier de trop. C'est canadien avec des serveurs français, pour l'indice... J'ai pu tester la réactivité du SAV, ils assurent.

![texte](https://filedn.eu/llqi9IBxlYouGRXYG2xlROb/img/2021/hebergement2a.PNG)

*le site en mode texte*

Donc après la sécurité, après les tests en beta version, j'ai du **travailler le fond** et pas seulement celui des articles déjà récupérés depuis Juillet 2020 en format markdown. Le fond, c'est avoir un code conforme aux standards [W3C](https://fr.wikipedia.org/wiki/World_Wide_Web_Consortium) déjà, ce qui en garantit la lecture sur les navigateurs de toute sorte. J'ai donc utilisé les testeurs de la W3C, pour le HTML5, pour la feuille de style CSS, pour le flux RSS : 100% après bien des modifications. J'ai appris beaucoup et modifié largement tout le template de base en épurant le code de toutes les rustines, les plugins. Ah oui, j'ai viré tout recours aux plugins jekyll aussi, histoire de maîtriser complètement le truc. Le RSS est écrit complètement par moi même en Liquid, tout comme le sitemap, les archives, les pages etc. Super simple quand on comprend la logique du truc. 

J'ai passé des outils SEO (optimisation pour les moteurs de recherche) pour travailler la **forme** aussi, dont celui de mon hébergeur et aussi de [SEObility](https://www.seobility.net/en/seocheck/), par exemple. J'ai aussi retravaillé le poids des petites images d'en-tête et pied de page pour les alléger au maximum. J'ai donc passé des tests de rapidité comme GT Metrix ou Google Speed Insight. Il a fallu retravailler la feuille de style pour les différents styles de texte, les tailles, les mises en gras. Et puis j'ai cherché à mettre en valeur ce qui devait l'être, masquer un peu plus ce qui n'est que du détail, de la fioriture comme les tags, la date de parution, etc... Je me suis aussi un peu débattu avec Open Graph et Twitter qui n'en fait qu'à sa tête avec ses standards pour permettre de partager de manière un peu plus propre et simple sur les réseaux sociaux. Là aussi, le template de base n'était pas du tout à jour. Ce qui veut dire, veille technologique sur les standards du web et le SEO. Un petit remerciement au passage à ceux qui ont pris le temps de critiquer la forme pour me pousser à améliorer des points de détails, comme par exemple les couleurs, les liens.

![seo](https://filedn.eu/llqi9IBxlYouGRXYG2xlROb/img/2021/hebergement2b.PNG)

La grosse question pour ce site statique a été de **gérer les commentaires**. Je vous ai assez bassiné depuis des années à en faire de jolis en dessous. Presque 3 commentaires par article, ce n'est pas extraordinaire mais ce n'est pas mal, je trouve, avec des personnes de qualité. Reste qu'on tombe souvent dans le commentaire de témoignage qui n'apporte pas tant que ça à l'article. Appréciable pour l'égo et le relationnel, moins pour les autres lecteurs, sinon pour l'ambiance. J'ai réussi à éviter les trolls depuis des années, par chance, même sur les sujets les plus polémiques. Akismet fourni avec wordpress fait le job pour le spam. Mais pour du statique, tout ça ne fonctionne plus. Il faut soit passer par des sites tiers, comme Disqus ou des équivalents plus respectueux des données, mais je n'ai pas envie d'embarquer et d'alourdir le code, d'obliger à des inscriptions. Ou alors on fait avec de petites bases PHP, du javascript qu'il faut héberger ailleurs. Non, je ne veux pas avoir à gérer la moindre donnée personnelle. Donc les commentaires passent désormais par deux outils : Le bon vieux mail ou mastodon, ce réseau social décentralisé qui correspond bien à mon public, ou une partie au moins.

Oui, mais le mail alors, **ça veut dire du spam** ? J'ai trouvé un compromis en recyclant une adresse mail dite "poubelle" et en mettant éventuellement en place un "pot de miel" inversé. L'adresse qui se remplit automatiquement n'est pas la bonne. J'indique ce qu'il faut faire dans le corps du mail rempli automatiquement. Un robot spammeur ne saura pas faire...pour l'instant. C'est une petite contrainte pour un humain. Double sécurité donc puisque l'adresse poubelle gère le spam. Pour les personnes de confiance que je connais ici depuis des années, elles ont mon "vrai" mail pour me contacter et ne se gênent pas pour ça. Le code que j'ai à insérer est donc le suivant si je mets en place ce piège à bot : 

![code](https://filedn.eu/llqi9IBxlYouGRXYG2xlROb/img/2021/liencomment.jpg)

Pour le reste, mastodon ne risque pas non plus d'être surpeuplé. J'ai modifié et adapté ce que j'utilisais pour le partage d'article pour faciliter la rédaction de commentaire. Deux solutions, c'est offrir de la liberté au lecteur. Je vois des réticences par rapport au côté immédiat et apparent des commentaires type wordpress...qui sont le plus souvent modérés pourtant donc différés et dont je peux aussi voir les adresses mails et carrément les IP, en plus. A méditer, ami(e)s lecteurs/trices. Essayez, vous verrez bien.

![tests](https://filedn.eu/llqi9IBxlYouGRXYG2xlROb/img/2021/hebergement2c.PNG)

J'ai passé une bonne semaine à travailler ça **pendant mon temps libre**. C'était nécessaire et je trouve encore des petits détails à revoir. Il faut que je revois certains codes pour que cela soit exploitable par une autre personne que moi qui voudrait forker mon fork. Ensuite, ne me restait plus qu'à relire et retester les 1400 pages en changeant les illustrations, en améliorant certains paragraphes, corrigeant des coquilles... Il en reste sûrement. Tout ça en gardant aussi le flux normal de mes articles qui n'ont pas manqué de sortir périodiquement. Avec mon système de réplication et sauvegarde des brouillons en .md (markdown), je peux bosser dessus n'importe où, sur n'importe quel support. Les brouillons sont dissociés du reste des sources du site. J'ai beaucoup plus de souplesse aujourd'hui et je suis assez fan de l'éditeur "Formiko" sur debian/ubuntu etc...ainsi que de Markor sur Android. 

"Alors, t'attends quoi pour dire que tu bascules sur la nouvelle adresse ?" . Comme d'habitude, je suis en avance sur mon objectif. Je m'étais fixé l'échéance de **décembre 2021**. Cela vous laisse le temps de vous habituer à cette nouvelle forme, plus rapide mais sans doute un peu moins interactive en apparence, sans toutes les vidéos et grosses images qui ne sont pas souvent regardées en fait. Je n'ai plus aucune statistiques sur le site, je m'en fiche. J'ai remis un flux RSS complet sur cette nouvelle adresse qui vous donne la liberté de ne pas me visiter directement. Au moment où cet article sort, je suis suffisamment satisfait du boulot réalisé. C'est au fond, ce que je voulais faire depuis longtemps, parce qu'il fallait être cohérent avec le discours (pas de pub, pas de lenteur). Beaucoup de gens considèrent que l'ère Wordpress a été, que le produit est trop gros aujourd'hui et se fait concurrencer par d'autres, pour s'orienter sur autre chose que le blog. L'éditeur, Automatic, a prévu tout autre chose pour l'avenir de son produit phare que le simple blog, donc préparez vous à changer un jour, les amis. Je n'ai fait qu'anticiper de quelques années. Il fallait faire ce boulot fastidieux qui me correspond mieux mais ne conviendra pas à un débutant vu tout le boulot nécessaire pour **faire la parution**.

En effet, il faut transférer le fichier de l'article généré sur le serveur ( par filezilla, rsync, etc...) mais il y a aussi la mise à jour des pages thématiques,de l'index, du sitemap, de l'archive, et du feed RSS soit près de 6 fichiers à chaque fois. Ça me va plutôt bien de faire comme ça plutôt qu'une programmation dans WordPress qui n'était pas toujours si pratique. Il y aura peut-être plus de creux dans la parution mais qu'importe finalement. Je ne dépend quasiment que de moi même et c'est ce que je voulais, tout autant qu'une simplicité de présentation retrouvée. Le blog aura connu bien des modes pour revenir aux basiques. Pour les néophytes,il y a pour cela d'autres plateformes comme Medium, Plume, Write.as, ...Wordpress.com pour quelques temps peut-être. Le plus chiant de changer comme ça, c'est qu'on ne peut pas exporter et réimporter dans toutes ces alternatives. J'en ai assez ch... moi même. 

Donc **je vous laisser aller dorénavant sur : [https://www.cheziceman.fr](https://www.cheziceman.fr)** , me faire des commentaires sur le fond et la forme (merci pour ceux déjà faits). J'arrêterai les articles au maximum le 31 décembre 2021 sur le chez iceman wordpress pour poursuivre de longues années sur ce nouveau site et faire évoluer les choses. Je me réserve le droit de le faire avant (mon côté Castex...) Dorénavant, c'est bien cheziceman.fr qui a la primeur des articles surtout le mardi, le jeudi et le samedi, quand vous vous levez. Un de ces jours, je basculerai tous les commentaires sur cette façon de faire et pour l'instant je mets ça avec la bonne adresse email. Profitez-en, c'est super simple.

Bande son : [Cephaz - On a mangé le soleil ![video](/images/youtube.png)](https://www.youtube.com/watch?v=rq_8joarOjY&t=2) ... parce que je n'ai pas envie de le manger !

*PS : Dernier article sur ce thème avant un moment. Le Blog va reprendre dans sa diversité le samedi. Une pensée à un "collègue" de blog qui a choisi de faire une pause pour une autre activité.

